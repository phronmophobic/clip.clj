<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="In this post we&apos;ll be exploring the ideas behind semantic image search and vector databases using the wikiart dataset. Our goal is to be able to search the 81,444 available images using plain english. On the implementation side, we&apos;d like to be really lazy. Ideally, we&apos;d like to shove all the images into a &quot;vectordb&quot;, pass it the plain english query, and get reasonable results." property="og:description"><meta content="Semantic Image Search with Clojure" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><script src="https://cdn.tailwindcss.com?plugins=typography" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  @media print {
      h1 { @apply text-2xl !important; }
      h2 { @apply text-xl !important; }
      h3 { @apply text-lg !important; }
  }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
  table img { @apply inline-block; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.markdown-viewer ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.markdown-viewer .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.code-viewer {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.code-listing  {
    @apply -ml-8 -mr-8 relative !important;
}
.code-viewer .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
    .notebook-viewer .code-viewer .cm-content {
        @apply pb-2 pl-12;
    }
    .notebook-viewer .code-listing {
        width: 48rem !important;
        @apply -ml-12 mr-0 !important;
    }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .result-viewer {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.notebook-viewer,
.markdown-viewer {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.markdown-viewer blockquote p:first-of-type:before,
.markdown-viewer blockquote p:last-of-type:after {
  @apply content-none;
}
.markdown-node-viewer.result-viewer.fragment-item {
    @apply mb-0 !important;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.markdown-viewer .toc      { @apply mt-4; }
.markdown-viewer h1 + .toc { @apply mt-8; }

.markdown-viewer .toc h1,
.markdown-viewer .toc h2,
.markdown-viewer .toc h3,
.markdown-viewer .toc h4,
.markdown-viewer .toc h5,
.markdown-viewer .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.markdown-viewer .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.markdown-viewer .toc li    { @apply m-0; }
.markdown-viewer .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.markdown-viewer *:first-child:not(.code-viewer):not(li):not(h2):not(.sidenote) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .result-viewer { @apply mt-0; }
.code-viewer + .result-viewer { @apply mt-3; }
.markdown-viewer + .markdown-viewer { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
}
.sidenote {
  @apply block font-sans text-xs mt-4 bg-slate-100 dark:bg-slate-800 p-4;
  font-style: normal;
  font-weight: normal;
}
.sidenote-container {
  @apply mb-4;
}
@media (min-width: 860px) {
  .sidenote sup { @apply inline; }
  .sidenote-column {
    @apply w-[165px] absolute right-0 top-0 -mr-[205px];
  }
  .sidenote {
    @apply bg-transparent dark:bg-transparent p-0;
  }
  .sidenote:first-child {
    @apply mt-1;
  }
  .sidenotes-layout .markdown-viewer {
    @apply pr-[241px];
  }
  .sidenote-container {
    @apply relative mb-0;
  }
  .sidenotes-layout h1 {
    @apply w-[756px] !important;
  }
}
.code-viewer + .viewer:not(.code-viewer):not(.code-viewer-folded),
.code-viewer-folded + .viewer:not(.code-viewer):not(.code-viewer-folded),
.result-viewer:not(.markdown-node-viewer) + .result-viewer {
  @apply mt-2;
}
.code-viewer + .code-viewer-folded {
  @apply mt-4;
}
.result-viewer {
  @apply leading-tight mb-6;
}
.code-viewer.fragment-item.result-viewer {
  @apply mb-0 !important;
}
.result-viewer figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }

@media print {
    .dark-mode-toggle,
    .toc-toggle { @apply hidden; }
    .notebook-viewer { @apply pt-0; font-size: 12pt !important; margin-left: 0 !important; }
    .code-viewer .cm-content,
    .viewer-code .cm-content { @apply whitespace-pre-wrap !important; overflow: none; }
    .code-viewer .cm-line { font-size: 12pt !important; }
    html * { page-break-inside: avoid !important; }
    .toc-panel { @apply hidden; }
}
</style><script src="https://storage.clerk.garden/nextjournal/clerk-assets@Me6c4a1aFwAPMjnGU96CERc3zTT/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/wikiart.clj\" {:path [], :nextjournal/value {:toc {:type :toc, :children [{:type :toc, :content [{:type :text, :text \"Semantic Image Search with Clojure\"}], :heading-level 1, :attrs {:id \"semantic-image-search-with-clojure\"}, :path [:content 0], :children [{:type :toc, :content [{:type :text, :text \"Fuzzy Matching\"}], :heading-level 2, :attrs {:id \"fuzzy-matching\"}, :path [:content 3]} {:type :toc, :content [{:type :text, :text \"Reverse Image Search\"}], :heading-level 2, :attrs {:id \"reverse-image-search\"}, :path [:content 5]} {:type :toc, :content [{:type :text, :text \"Implementation\"}], :heading-level 2, :attrs {:id \"implementation\"}, :path [:content 8], :children [{:type :toc, :content [{:type :text, :text \"Embedding Vectors\"}], :heading-level 3, :attrs {:id \"embedding-vectors\"}, :path [:content 16]} {:type :toc, :content [{:type :text, :text \"Comparing Embedding Vectors\"}], :heading-level 3, :attrs {:id \"comparing-embedding-vectors\"}, :path [:content 36]}]} {:type :toc, :content [{:type :text, :text \"Limitations\"}], :heading-level 2, :attrs {:id \"limitations\"}, :path [:content 43]} {:type :toc, :content [{:type :text, :text \"Conclusion\"}], :heading-level 2, :attrs {:id \"conclusion\"}, :path [:content 50]}]}]}, :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns wikiart), :scope wikiart, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil nil [:span \"Generated with \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] \" from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href nil} \"src/wikiart.clj\" nil]]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn identity, :hash \"5dshxZVwN6qRJ5AkN8xmdNByoHEBBs\"}}, :open-graph {:type \"article:clerk\", :title \"Semantic Image Search with Clojure\", :description \"In this post we'll be exploring the ideas behind semantic image search and vector databases using the wikiart dataset. Our goal is to be able to search the 81,444 available images using plain english. On the implementation side, we'd like to be really lazy. Ideally, we'd like to shove all the images into a \\\"vectordb\\\", pass it the plain english query, and get reasonable results.\"}, :title \"Semantic Image Search with Clojure\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dsHWcfNuLqNQGRLMn5wPeECTAdHaL\"} [\"h1\" {:id \"semantic-image-search-with-clojure\"} [:<> \"Semantic Image Search with Clojure\"]] [:p [:<> \"In this post we'll be exploring the ideas behind semantic image search and vector databases using the \"] [:a {:href \"https://huggingface.co/datasets/huggan/wikiart\"} [:<> \"wikiart dataset\"]] [:<> \". Our goal is to be able to search the 81,444 available images using plain english. On the implementation side, we'd like to be really lazy. Ideally, we'd like to shove all the images into a \\\"vectordb\\\", pass it the plain english query, and get reasonable results.\"]] [:p [:<> \"For the most part it works.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dsHWcfNuLqNQGRLMn5wPeECTAdHaL\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"farm animals, cute, cuddly\\\")\", :nextjournal/opts {:loc {:line 76, :end-line 76, :column 1, :end-column 43}, :id \"wikiart/anon-expr-5ds21QRsoEfUN73oK4UU4XMJLFZGmZ-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuZDX2VpYHrSHkXtt9N68gtuyW5yVnqAsc5zcZBmuWg4wneVhdByveciPqYT99SXsRM16PoCi2b551Bj5YgLAPQp2.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VthXdWzJjy4asgCpQ7xMLD5PcrgRdkz5yRP8tbR6bSE9towTE7MasHBnMrkr93VwENMAGZvz6mYfAYigc2UQHUypw.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VubdGTbNTL4TCMT47GjKE2HaVUpxCFAptmwR64MFBUWpAC8uncUic5eGZtpubkgKV4zymjnsyKNhyd3zzmBGufKn9.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtMFY54kZkKEpRxZBCc8Ha6YySjYoCNXP2x9NN9J688DoGEepxbDNTiayyGazcN7WuijhtYdrUGxxTPwuh5M3vFwo.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5ds21QRsoEfUN73oK4UU4XMJLFZGmZ-result\"}}, :nextjournal/blob-id \"5ds95941yYPtKPgWqNpKj2XxantYK5\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5ds21QRsoEfUN73oK4UU4XMJLFZGmZ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"knight\\\")\", :nextjournal/opts {:loc {:line 77, :end-line 77, :column 1, :end-column 23}, :id \"wikiart/anon-expr-5dqrqoJTmyeehWT3daF7yxD9ckKVGP-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvQ1PR7RETTFsxuKqtuSnoDdLFjndfxior2XEduY2B7th5y1n9ZcJm9KNkkHKnmvjWWEMg8xP76FmWAvraGdLCZde.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxZoDP6re4A1puEosAPgJ6HJnJCWTRFJD1QS8b1FDDLNon6L5ibg86n5iETWe6hH5gcPktj6wpB1sMDFzcJmRj7nD.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtEzy4o5FHC8x4FjMXoTe32bYN1gWxT6ap7VSgPGpaKVZaohyx8w4yRw5jm2HJzZscKXWozwD1AiHXfT5fTSQYPtV.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwYZaYsANG3KCYFQjNnd1YWQJ19dNz2RCAnF7cvpgfTrjoL8FPFScgWagdwmqKeSx8HD795nQpDwewRnkwDS3JGfu.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dqrqoJTmyeehWT3daF7yxD9ckKVGP-result\"}}, :nextjournal/blob-id \"5du5CEq75waYbQEZLBxZzz7Dy34P6w\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dqrqoJTmyeehWT3daF7yxD9ckKVGP-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"medusa\\\")\", :nextjournal/opts {:loc {:line 78, :end-line 78, :column 1, :end-column 23}, :id \"wikiart/anon-expr-5drYzhgwDhLNfo1wv795uSB88EPNPQ-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxUd2VoWXpYoWVrvt9dLSDF57q53eKRGeFV9ELU8dQp9qMjoyMLPYgka3TvUBz1WERSqdgfkEWw5zfGsExpX3xvgB.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvptfKNMiNrnhZ5x6ARj9HqNvFsfCSrihXGFAoZ4aJss8ypBf9Eott4ZZNWoAJoYJAJgwvgUbG4sjhe1LHpJEo4DF.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwaPuQEDBbMiM5SU2Qiy2tzof5vCwsGqdNtZLDTHzYqNkKVtJm4gyTd1Gv9BXbWEJDLPt4xk957jKccojmTpuQTZX.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwcqPXyxkxEN5QrcwmcPVa2fMMXmUC9zPXrDZRRNNzM1FCCaUnKkRVbjb5uhC64SsT7Tc4zzVXeSE9xyfvkLjzeTs.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drYzhgwDhLNfo1wv795uSB88EPNPQ-result\"}}, :nextjournal/blob-id \"5dr3tgxj7DfRuC9JqvJPYeEW4ktvMt\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drYzhgwDhLNfo1wv795uSB88EPNPQ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"green and blue, bouquet\\\")\", :nextjournal/opts {:loc {:line 79, :end-line 79, :column 1, :end-column 40}, :id \"wikiart/anon-expr-5dsXLMVTjdievWgY1fyYNRz9tuYbWc-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VthyKjRk2kvfbqAfM7Y6QcAj4jr8sXEfjfdfw3nfUtCPSjysFZE9BCycQBwWwB83B67RueSp9i4ieyqKnCS2wFUps.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvkHqRyJRrS5HqiEWEhRekVqin4gDKJWWo3HgxU9kXXXTK594JZ9qVrDeUjcyhSbpoBKxkQNtZM6tV5STo9z1aGyL.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxaE69z8rVd899XCgEhaAhr1JZp9ikVVrXoaG2SrMohziCeqaLsPSDamDX48PNcMQ8kgwW1kqTfidGMmtudnWUdik.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vubctk7rdPdaA6E1T9ZPWz6RLtDoxKqaWCMDKoLGvWa3kEt3jvy8S44NbSnjqjU77n1pFLeegw57ERwJ84qc31uJF.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsXLMVTjdievWgY1fyYNRz9tuYbWc-result\"}}, :nextjournal/blob-id \"5ds8Wmy8oA3MMvMHUiZ399vNigxB5r\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsXLMVTjdievWgY1fyYNRz9tuYbWc-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"da vinci sketch\\\")\", :nextjournal/opts {:loc {:line 80, :end-line 80, :column 1, :end-column 32}, :id \"wikiart/anon-expr-5drMGHonpbionHLoHXt4RzsjnYfrGW-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtqcrhFW2NGfSibMsPC15KQV1BJTiEZQBXRphLkJkJidu25PSP4pS5AzambFAQsUVn86g5EMRkEG4mavqD2zNpmEM.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuSVssFDX9uE3zQb3EtmRuAUT1xHWgXVHHWp3iMjCJTXisJrp2vvFZhDEaYaGtu3jBaz9maLKctHEecFe3RzEDcCo.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvAATR7QTVb36Dwufk5rkSBnWoThv1ngxwtBGU449EEqHkzSuR5XPcXoRgTjGkrBMEVYctHnG1w17r6kX2Jpx1EZR.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvtcFdpdSukXGYf12iVc8mdxjSe3dTkCYsnicSGmQ8GK1HkyXMBacVi7hQtPKasQTG1T7VMixHGV2XgAZE5HdAgWU.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drMGHonpbionHLoHXt4RzsjnYfrGW-result\"}}, :nextjournal/blob-id \"5drGQfTYg1DwB9sic48MxKzqr7ycW5\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drMGHonpbionHLoHXt4RzsjnYfrGW-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"twins\\\")\", :nextjournal/opts {:loc {:line 81, :end-line 81, :column 1, :end-column 22}, :id \"wikiart/anon-expr-5dqp2DygEPZKfFCzJm8ZPVWe5mQPpe-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vx3TNdVwCTiCPuTpBtNmWfRNrcVxT5uxpLu2SHmiaPvtuucXKAeE616xtzWtFtUumdFq1SzEnHQu3uGyZPazg5GVu.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwPqX8gvPj8XVPZV1i9FPz24vkx42ZVMBEQCu7dzCaUaoCBJcxnxYk9Rikg9VJ3zo4jXnLDYDReA5t4bFtPoHhXh3.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw4BrwWL5253rtCKE1hgk5NceTZA2RdFkbrXjQBqavC7b4NbMLA1q44WxRKPZdwCB5DrdbuF5qwdwoncDA9XzqCUN.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwFv2irdC354pubijQQg9w9QDTprmtLVhQBuUx4QD2B1Ssw35f3iJbp9yusfjAiXHMrShDidrT7ZmPVsHxLJZAYDe.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dqp2DygEPZKfFCzJm8ZPVWe5mQPpe-result\"}}, :nextjournal/blob-id \"5drUyPbMz5q4K45MoFz3APKepgoYA4\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dqp2DygEPZKfFCzJm8ZPVWe5mQPpe-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtsZn1dgYJcAHMydweGBBxEhNJPPB\"} [\"h2\" {:id \"fuzzy-matching\"} [:<> \"Fuzzy Matching\"]] [:p [:<> \"Even if the dataset doesn't have an exact match, it often does a good job finding \\\"similar\\\" ideas.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtsZn1dgYJcAHMydweGBBxEhNJPPB\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"bigfoot\\\")\", :nextjournal/opts {:loc {:line 87, :end-line 87, :column 1, :end-column 24}, :id \"wikiart/anon-expr-5dsDvhr9f4s5ErxNnj372sBqse1L8x-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxQDAfQvVAu4nMGAbLy5X2wVzDnCwumyKj9SxCWQv4sq7H3ETdZTC485QHD6jcgCv7Bp1nPyiAV6UhYVwuNeLagdh.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwHfEEEi8pGRvo5VUwy1kHykbB6KgLfJkyJbndxBESsWsC1aZ13d9dF4wymQmzPfLQwfbnAfVSF5ukKNtrwKkVLu4.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtPTQwVebdgScm3dCYALFCRsrTk46QzckZ3VoBHe1DopS3sXjtx4yKuqvmr1ysaf4U2K55vtExrzi38aoxyX9nury.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuDhuP3FCbpEGVTdmLQnHWffFzLurq5s5sqfm33NLcC6mj2D7ue1TNgAwCNiA2rQb6rNgic9YtHTo9XZZznXkikLJ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsDvhr9f4s5ErxNnj372sBqse1L8x-result\"}}, :nextjournal/blob-id \"5drWqnBCourY4xuS3qWTZt5FhYtymW\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsDvhr9f4s5ErxNnj372sBqse1L8x-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"lord of the rings\\\")\", :nextjournal/opts {:loc {:line 88, :end-line 88, :column 1, :end-column 34}, :id \"wikiart/anon-expr-5dtQaZAJqVi6EBFda6NQtkKLSToPHB-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw47CRRAJaNihPmJttKNHB9WUQwxYGKeoycspzsqHUAjUtrhssiNJ7BPow3CD9dzW35VUiMzNLKbirWtzjEF7sUvF.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtUT8Kcd3VUwe1YSd6TZkHtjTvKj9nUtGwV9mBBsDgpMUAazgnUjVTbSnfN8orPAHwtz59Db9E2nuWsFc4dQni4oV.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwnvfyGBUaMysWwTsiHe8W7G3jNskTcQuLfZCMw3yxsKoSfBEDQ5BWPHrFZS3oFrfSPLojpdhD33dQ9rwbUXYShmu.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vuf9V1yTwZndCdAW17A55Z9bCXtqyXxomojNkPx5umke9QWSXGAFDwPGuNQ3apt7hWP5er7MfDmH7655qqtJgAd3U.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtQaZAJqVi6EBFda6NQtkKLSToPHB-result\"}}, :nextjournal/blob-id \"5drdEgaL6ULq6ypKTZF8X7Ve9Qq1Eq\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtQaZAJqVi6EBFda6NQtkKLSToPHB-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"hogwarts\\\")\", :nextjournal/opts {:loc {:line 89, :end-line 89, :column 1, :end-column 25}, :id \"wikiart/anon-expr-5dsosJuqpvq1szspKWdRmohJracD4p-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vxo8AzenQctXiqKcyyMaq7aTKgjowesGeNbACkUsKR9YqapjJPuj8v12bcKQo6oKwVK66eBTufpobigPdJmgQ2fXr.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VukJmQ3Y5TdBBSuUnhv24X5t96CEStK9WaLRjU7o7NUuirTbkFAMyvRYKf1ZSQiWSaabsr3TScBPtTTBF5Jh6jVt3.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtcJrFbQxe96jiKyAvmS52DBFu49WgxqqDZxQNHbipeQA97xUxdRdQRoxqAPLsh7Twzs4NkvA7fsVWTQYNWXCHPMv.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuCXWZGkJTPnEuRT2K2XdyDqyxcxmoMrnFozwCLG59akShmbF8B4cNPcsbm9pCdqmW8qfNFxP8KanNTbBdapyDjTw.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsosJuqpvq1szspKWdRmohJracD4p-result\"}}, :nextjournal/blob-id \"5ds39sV8XrsE8CeXrPeM1PwfVvPmhD\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsosJuqpvq1szspKWdRmohJracD4p-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"where's waldo\\\")\", :nextjournal/opts {:loc {:line 90, :end-line 90, :column 1, :end-column 30}, :id \"wikiart/anon-expr-5dr1FoY81hjLgJNqYMcpXLL9bovmiA-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VthjonUWMQbf2eeb4rDSytkP1zCfDspxfj3cfsQrMmEexJpLjJM9SvujmWfp3qqsJVHWXG1iv96Vk14KTEXrShrfM.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvQdsrzPCZk7h9HqVErn1FzaKvVyZHALibNfUSo6S2YewYh553SbnEkPZ4mbDzsYw8L2TVkuMCK1nTU5jQXPJqYbk.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvNNXu6BMyoZn6o8DJBqGEwP3RiKycfGoJ37QEmMdV9qzhwKm6c5p3PYpSwd2BekHujDUTuqAFXzEQfu8gU2ndrSj.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtiTJhBLFEjcRzQ2YQzgiqzsKg4qCsW7sE2n6Whk6p8QY4tdJ3o7u4KuFbgV6km7YXXyfGi1yKjq6HVyJ3LnhqiTk.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dr1FoY81hjLgJNqYMcpXLL9bovmiA-result\"}}, :nextjournal/blob-id \"5dtiFCGA4WkVV1pyhkbHRPUbY9s71m\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dr1FoY81hjLgJNqYMcpXLL9bovmiA-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtZiSaF2R3vdgjJP1DSqkVPwozg7H\"} [\"h2\" {:id \"reverse-image-search\"} [:<> \"Reverse Image Search\"]] [:p [:<> \"We can also search for \\\"similar\\\" images to an input image.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtZiSaF2R3vdgjJP1DSqkVPwozg7H\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/content-type \"image/png\", :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtoCpMZqsfugvSSeNCQfrEkkxtbz7mxqwAfdVVJqyJX9bVdDsvjnwwwgU9NuUXbcrxoyXo65iF7UuwhKtJNPmoXNu.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtbTQAyrefoqVaRZRiDoJd5i1LUob-result\"}}, :nextjournal/blob-id \"5dtdhq8zBGBwFSDm7bRMfCSSHG3kRy\"}, :nextjournal/width :wide, :nextjournal/opts {:id \"wikiart/anon-expr-5dtbTQAyrefoqVaRZRiDoJd5i1LUob-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtJBwDFqDmuqDzzjeD8hs7citaPtq\"} [:p [:<> \"source: \"] [:a {:href \"https://en.m.wikipedia.org/wiki/File:Photo_of_a_kitten.jpg\"} [:<> \"https://en.m.wikipedia.org/wiki/File:Photo_of_a_kitten.jpg\"]]]], :nextjournal/opts {:id \"wikiart/markdown-5dtJBwDFqDmuqDzzjeD8hs7citaPtq\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-image (io/file \\\"data\\\" \\\"kitten.jpg\\\"))\", :nextjournal/opts {:loc {:line 103, :end-line 103, :column 1, :end-column 45}, :id \"wikiart/anon-expr-5dsLX8bHvJSp12b3vCrQcX3ZhmHuQ5-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vv1Hr3nSKpZgN5RywHkZN1XKSVEsMrYGWYnX3u1rsAJH1VpeUCdBaS788VXmKvLki8GsGBhNk8A2Ps6fhckd8YyPH.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvtSzBgRr5LfmqhfJomF5mxtq4X5j5mSe87NTto4XJyqbN2y1jxvAq3FaGJCH3uqrcGGypGiBrnkT8EUb6e3TQcLi.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvTFF1wdaigw5bGHdxchTcj3XA3K6ce4n6cccE1NzBU3jkvDSisfhY1LLMAPHhSCL7uoFQTx5edVj8JyLoxShUmaZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxTA3t8tzR5UkCpFtprFR79jthF3ymvCMvYxpMNFHcjsuSkpmoy9SHRTQeTXgZkyVvt3UvRYSut4rY9Tvt9a6V6Do.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsLX8bHvJSp12b3vCrQcX3ZhmHuQ5-result\"}}, :nextjournal/blob-id \"5dsE6Ge7xoWN63rop31fpfw8hi4idK\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsLX8bHvJSp12b3vCrQcX3ZhmHuQ5-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5du2Z3ZJzWLKFwiA8hX6VD13qjwtbD\"} [\"h2\" {:id \"implementation\"} [:<> \"Implementation\"]] [:p [:<> \"To implement our semantic search, we use an \"] [:a {:href \"https://github.com/mlfoundations/open_clip\"} [:<> \"OpenClip\"]] [:<> \" \"] [:a {:href \"https://huggingface.co/laion/CLIP-ViT-B-32-laion2B-s34B-b79K\"} [:<> \"model\"]] [:<> \" to create vector embeddings. We then use \"] [:a {:href \"https://github.com/unum-cloud/usearch/\"} [:<> \"usearch\"]] [:<> \" to store the vectors and find matching results. If that all sounded like gibberish, don't worry. We'll cover the basics.\"]] [:p [:<> \"To explain how everything works, let's list the steps that were taken and then we'll explain the reasoning.\"]] [:p [:<> \"Prerocessing steps:\"]] [:ol [:li [:<> [:<> \"Download all the data and models\"]]] [:li [:<> [:<> \"Derive an embedding vector for each image\"]]] [:li [:<> [:<> \"Put all the embedding vectors in a vector database (we used \"] [:a {:href \"https://github.com/unum-cloud/usearch/\"} [:<> \"usearch\"]] [:<> \")\"]]]] [:p [:<> \"Query Steps:\"]] [:ol [:li [:<> [:<> \"Create an embedding vector for the query string\"]]] [:li [:<> [:<> \"Search the vector database for 4 image vectors that are nearest to the embedding vector for our query string\"]]]] [:p [:<> \"That's it!\"]] [\"h3\" {:id \"embedding-vectors\"} [:<> \"Embedding Vectors\"]] [:p [:<> \"Based on the implementation, it seems like \\\"embedding vectors\\\" are important, but what are they? As clojurians, we know how to solve that problem. Let's check the etymology. The term \\\"embedding\\\" comes from mathematics:\"]] [:blockquote [:p [:<> \"In mathematics, an embedding (or imbedding[1]) is one instance of some mathematical structure contained within another instance, such as a group that is a subgroup.\"]]] [:blockquote [:p [:<> \"When some object X is said to be embedded in another object Y, the embedding is given by some injective and structure-preserving map f : X → Y f:X → Y. The precise meaning of \\\"structure-preserving\\\" depends on the kind of mathematical structure of which X and Y are instances. In the terminology of category theory, a structure-preserving map is called a morphism.\"]]] [:p [:em [:<> \"source: \"] [:a {:href \"https://en.wikipedia.org/wiki/Embedding\"} [:<> \"https://en.wikipedia.org/wiki/Embedding\"]]]]], :nextjournal/opts {:id \"wikiart/markdown-5du2Z3ZJzWLKFwiA8hX6VD13qjwtbD\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"uh oh\\\")\", :nextjournal/opts {:loc {:line 133, :end-line 133, :column 1, :end-column 22}, :id \"wikiart/anon-expr-5drhYtbzdfXbnvNstUUy5zuzxkuZVQ-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvciMPjUawLCw45JJSfLz7yu2MJJfBYmdqfr6Wx3Hy663X8oGRWKNt588sa42HyHNJnABdrCfEusQaJMTVGxqyjVo.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vsve8yZuDcncuXfb1dxULfqZS4JX3Y81vEgrYUQJfmMFk8sjvJJReg4yFpp3wTtLJ53GuByXQY4vzR5KFko9oXoXo.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwLwqkJuqzBLZ8PAkD1dnUfeCv3RpLZk99RmYDy7z2W95kZPKB1rCdbwTtxWUU9HAU7nRqFXKLkhPbTyzd3QshFru.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuxYi3Jp7BKMBxNV3aAaYmHRgXmVugbxojJ92PjWLdRxaJ9VsXmXHf1B5pETG1gbPKQPeh8FVZLRkgCou99rrDrak.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drhYtbzdfXbnvNstUUy5zuzxkuZVQ-result\"}}, :nextjournal/blob-id \"5dswdqWp4u99Hg6eCWfekcjrpURNSw\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drhYtbzdfXbnvNstUUy5zuzxkuZVQ-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dsgJs5oujVUiHGBCEiCpb6NBzr2tn\"} [:p [:<> \"Hmmmm, that didn't help. Let's try something else. Forget about category theory for a second and recall the game \\\"20 questions\\\". In the game 20 questions, one person picks a secret, random object. The object is usually something like a bike, chair, or maybe even an elephant. It doesn't matter. The point of the game is for the other player(s) to try to guess secret object. The guessers are allowed to ask up to 20 yes or no questions that the object picker must answer truthfully.\"]] [:p [:<> \"Some example questions a guesser might ask:\"]] [:ul [:li [:<> [:<> \"\\\"Is it alive?\\\"\"]]] [:li [:<> [:<> \"\\\"Can you eat it?\\\"\"]]] [:li [:<> [:<> \"\\\"Is it bigger than a microwave?\\\"\"]]]] [:p [:<> \"The surprising thing about the game 20 questions is that the guessers actually have a pretty decent chance of figuring out the secret object. That's interesting, but what does that have to do with anything? It turns out the answers given to the guesser's questions are similar to an embedding vector.\"]] [:p [:<> \"While guessing in a game of 20 questions, you often pick different questions depending on all the answers you've received so far, but let's pretend that you ask the same 20 questions every time. We can represent all the responses as a vector of 20 boolean values:\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dsgJs5oujVUiHGBCEiCpb6NBzr2tn\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(into []\\n      (map (fn [_] (rand-nth [true false]) ))\\n      (range 20))\", :nextjournal/opts {:loc {:line 146, :end-line 148, :column 1, :end-column 18}, :id \"wikiart/anon-expr-5dt8XoMfNTzyHo8EEb2JRg6xQtrz8U-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [1], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [2], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [3], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [4], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [5], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [6], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [7], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [8], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [9], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [10], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [11], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [12], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [13], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [14], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [15], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [16], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [17], :nextjournal/value true, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [18], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}} {:path [19], :nextjournal/value false, :nextjournal/viewer {:render-fn #viewer-fn (fn [x] [:span.cmt-bool.inspected-value (str x)]), :hash \"5dqrMDaDgGmCugw5wYB5Q5fQgBLjXm\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dt3QWcZsmpyf9UoQBvu1GsszwrB5q\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt8XoMfNTzyHo8EEb2JRg6xQtrz8U-result\"}}, :nextjournal/blob-id \"5duA1QzUysW9YxadVEFCYFASPHpc9k\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt8XoMfNTzyHo8EEb2JRg6xQtrz8U-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5draphxEKCrcwWRuLsdGtrpFrcoq7E\"} [:p [:<> \"The first element of the vector corresponds to the answer of the first question, the second element corresponds to the answer of the second question, and so on.\"]] [:p [:<> \"If you can imagine filling out the answers for a bunch of objects, you can start to gain intuition for these vectors. One thing you might notice is that similar objects will have similar vectors (maybe only one or two answers differ). Another thing you might realize is that it makes a big difference \"] [:em [:<> \"which\"]] [:<> \" questions you ask. As a dumb example, if you ask both \\\"Is it bigger than house?\\\" and \\\"Is it bigger than a tree?\\\", the answers will largely overlap which makes one of the questions redundant.\"]] [:p [:<> \"You can also imagine that if you ask enough questions, you might be able to uniquely identify just about any object.\"]] [:p [:<> \"Finally, you may notice that it can be difficult to give a hard yes or no to particular questions. Limiting responses to just yes or no is unnecessarily restrictive. For example, if someone asks \\\"Is it edible?\\\" and the secret object is a tarantula, you might want to be able to respond with some sort of \\\"ehh\\\".\"]]], :nextjournal/opts {:id \"wikiart/markdown-5draphxEKCrcwWRuLsdGtrpFrcoq7E\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"Is it edible?\\\")\", :nextjournal/opts {:loc {:line 158, :end-line 158, :column 1, :end-column 30}, :id \"wikiart/anon-expr-5dt8DmjvDg6fd1UnbHwjcNUWKvhvDw-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuTx8gh1EhDcvKCZM6TsifL8cg4PsyL8wm2Zsj4QhfFxLqQvpMpkFqd1ssmSeBC2LmEqwiMCo8oWU6cPfTG1YSBHq.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vv5YperHvXGWcr5kejxYt5x62aw71zd9RMqrueUNNT2XntLKraQ35q2JD1o14VLeovDzdpFAnFnW8wtjcZbvUrzuj.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxVmgMc8jfpDjGfq8imoGKpDi2igTLjcYY1fHfgrxfCKCtL3jqrkebERyRMMXQFmiLjpPR368vswvDNQGFkTDNuwe.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtbutSV6ecxh7BeMvK8mtLTd35x4Mv1PrqmvrSF6BJpyaPRpgUx61xBfvgJE5ZgFNdDRQxgxR3gvk6aGcjjdrhs5u.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt8DmjvDg6fd1UnbHwjcNUWKvhvDw-result\"}}, :nextjournal/blob-id \"5dt3EHjP4LypmEtweEDFdk8dRehnf3\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt8DmjvDg6fd1UnbHwjcNUWKvhvDw-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5drAdyWYkYkRETe9ULdApETqnCgbQg\"} [:p [:<> \"One way to allow more descriptive answers than yes/no is to allow the answer to represent where on the spectrum of yes/no the answers lies. So if the answer is halfway between yes and no, you might represent the answer as 0.5.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5drAdyWYkYkRETe9ULdApETqnCgbQg\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(into []\\n      (map (fn [_] (rand)))\\n      (range 20))\", :nextjournal/opts {:loc {:line 162, :end-line 164, :column 1, :end-column 18}, :id \"wikiart/anon-expr-5drCAJSj5PrXmiPmW9mqvFmsXjFig2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value 0.4815386324421521, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [1], :nextjournal/value 0.16732361452166533, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [2], :nextjournal/value 0.3537444583375743, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [3], :nextjournal/value 0.6808881563857753, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [4], :nextjournal/value 0.7848859690941643, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [5], :nextjournal/value 0.28617993748265824, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [6], :nextjournal/value 0.9857749058381994, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [7], :nextjournal/value 0.12512121320080372, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [8], :nextjournal/value 0.15723492058623845, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [9], :nextjournal/value 0.8965863010041591, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [10], :nextjournal/value 0.6078638933758324, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [11], :nextjournal/value 0.6520500467929495, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [12], :nextjournal/value 0.8503712887267049, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [13], :nextjournal/value 0.3370597667366946, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [14], :nextjournal/value 0.9116569735784148, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [15], :nextjournal/value 0.29802134468091745, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [16], :nextjournal/value 0.29825378416816284, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [17], :nextjournal/value 0.17697909070470352, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [18], :nextjournal/value 0.5597058776387819, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [19], :nextjournal/value 0.6484459665009388, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dt3QWcZsmpyf9UoQBvu1GsszwrB5q\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drCAJSj5PrXmiPmW9mqvFmsXjFig2-result\"}}, :nextjournal/blob-id \"5dthJuWx5ESBUr6ka8azxjQqxvSa88\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drCAJSj5PrXmiPmW9mqvFmsXjFig2-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtfjUrdzmU24qTnTR3L6hBpN2BtnR\"} [:p [:<> \"This vector of floating point numbers is essentially the embedding vector we were trying to figure out. \"] [:strong [:<> \"An embedding vector can be thought of as the collection of answers to a series of questions.\"]] [:<> \" Typically, if a vector has answers to \"] [:code [:<> \"n\"]] [:<> \" questions, then we say that it has \"] [:code [:<> \"n\"]] [:<> \" dimensions. Figuring out things like which \\\"questions\\\" ask, how many is the right number, and even filling in the answers for a given image or query is beyond the scope of this post, but hopefully this analogy gives you an intuition for what we're dealing with here. For more information, you can check out the research behind \"] [:a {:href \"https://openai.com/research/clip\"} [:<> \"clip\"]] [:<> \".\"]] [:p [:em [:<> \"Note: If you read about embedding vectors, no one will describe them as having answers to a series of questions. This is really about building a mental model for how these things behave.\"]]] [:p [:<> \"Let's take a look at a real embedding vector.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtfjUrdzmU24qTnTR3L6hBpN2BtnR\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(clip/text-embedding @util/clip-ctx \\\"Is it edible?\\\")\", :nextjournal/opts {:loc {:line 172, :end-line 172, :column 1, :end-column 53}, :id \"wikiart/anon-expr-5drrzNEjLjNxZMoWNHQowZzog5jNd4-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value -0.010567087, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [1], :nextjournal/value -0.003225648, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [2], :nextjournal/value -0.022244614, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [3], :nextjournal/value 0.058907032, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [4], :nextjournal/value 0.004437281, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [5], :nextjournal/value -0.038084496, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [6], :nextjournal/value 0.017686438, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [7], :nextjournal/value 0.031654693, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [8], :nextjournal/value -0.06406879, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [9], :nextjournal/value -0.022871474, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [10], :nextjournal/value -0.04657757, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [11], :nextjournal/value 0.006673384, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [12], :nextjournal/value -0.010674548, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [13], :nextjournal/value 0.018168226, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [14], :nextjournal/value 0.0082960585, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [15], :nextjournal/value 0.036556747, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [16], :nextjournal/value -0.2809627, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [17], :nextjournal/value -0.032414988, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [18], :nextjournal/value -0.023029085, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [19], :nextjournal/value 0.006003538, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:nextjournal/value {:n 20, :path [], :total 512, :offset 20}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5dspwtw9QTXohtFfqtoeWBkFHRFp9w\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dt3QWcZsmpyf9UoQBvu1GsszwrB5q\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drrzNEjLjNxZMoWNHQowZzog5jNd4-result\"}}, :nextjournal/blob-id \"5dryLZv1bnvxcUQCfx2RtkCDEYK72H\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drrzNEjLjNxZMoWNHQowZzog5jNd4-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5drFJcgdkaLNLtkoNk6mDWNwCP7LLr\"} [:p [:<> \"We can also create embedding vectors for images.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5drFJcgdkaLNLtkoNk6mDWNwCP7LLr\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(util/image->embedding (io/file \\\"data\\\" \\\"kitten.jpg\\\"))\", :nextjournal/opts {:loc {:line 176, :end-line 176, :column 1, :end-column 54}, :id \"wikiart/anon-expr-5drbK8uN2XC8V4zWPQUDNAVgaRCfBg-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value 0.010587821, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [1], :nextjournal/value 0.089945294, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [2], :nextjournal/value -0.13139693, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [3], :nextjournal/value -0.05789953, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [4], :nextjournal/value 2.0164324E-4, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [5], :nextjournal/value 0.029953327, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [6], :nextjournal/value 0.06268623, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [7], :nextjournal/value 0.009981341, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [8], :nextjournal/value 0.031602148, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [9], :nextjournal/value 0.055541854, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [10], :nextjournal/value 0.04586608, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [11], :nextjournal/value -0.053575058, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [12], :nextjournal/value 0.05004475, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [13], :nextjournal/value -0.05918384, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [14], :nextjournal/value -0.0049666283, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [15], :nextjournal/value 0.0129579045, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [16], :nextjournal/value -0.14924702, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [17], :nextjournal/value -0.008878507, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [18], :nextjournal/value 0.003060324, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [19], :nextjournal/value 0.028087351, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:nextjournal/value {:n 20, :path [], :total 512, :offset 20}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5dspwtw9QTXohtFfqtoeWBkFHRFp9w\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dt3QWcZsmpyf9UoQBvu1GsszwrB5q\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drbK8uN2XC8V4zWPQUDNAVgaRCfBg-result\"}}, :nextjournal/blob-id \"5drcJAAmZb25aBeboYnUi2LYGviXVs\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drbK8uN2XC8V4zWPQUDNAVgaRCfBg-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dsUzGK624iWGhjhKJjFvq9AhUiHNm\"} [:p [:<> \"The main differences between these real vectors and our hypothetical vector is that the values of this vector are in the range of [-1, 1] and that there are 512 values (or dimensions).\"]] [\"h3\" {:id \"comparing-embedding-vectors\"} [:<> \"Comparing Embedding Vectors\"]] [:p [:<> \"Hopefully, we now have a fuzzy idea of what an embedding vector is. How does that help with search? Going back to our 20 questions thought experiment, you may remember that similar objects will have similar answers, and hence, have similar vectors. Even though we've upgraded our vectors by making them longer and giving answers on a spectrum, the same idea still applies. Similar objects will correspond to similar vectors.\"]] [:p [:<> \"We didn't actually specify an implementation for calculating the similarity between vectors. For the simple case of yes/no answers, one obvious way to do it is to just count the number questions where two vectors give same answer. We can then use the number of shared answers as a similarity score. Another way to think about it is to count the number of questions where the answer differs. Counting mismatched answers gives us a \"] [:em [:<> \"difference\"]] [:<> \" score rather than a \"] [:em [:<> \"similarity\"]] [:<> \" score. It turns out that for more complicated cases, thinking about the \"] [:em [:<> \"difference\"]] [:<> \" between vectors is easier than thinking about their similarity.\"]] [:p [:<> \"Unfortunately, our vectors are full of floating point numbers, not booleans. There's not just one obvious way to calculate the distance between two vectors. It seems like there would be many ways to calculate a difference and you would be right. One way to calculate the distance between two vectors is to just do elementwise subtraction between the two vectors and add up all the differences. This distance metric is called the Manhattan distance. For some of you, this may be giving flashbacks to one of your classes from school years ago. Even though we're dealing with vectors with hundreds of elements, the distance metrics we use for 1d, 2d, and 3d space can apply to our n-dimensional embedding vectors. For example, we can use  euclidean distance for our distance metric. There are also about a dozen others. The \"] [:code [:<> \"usearch\"]] [:<> \" library has the following: cos, divergence, hamming, haversine, ip, jaccard, l2sq (euclidean), pearson, sorensen, and tanimoto. I don't even know what half of them do, but the point is we have options.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dsUzGK624iWGhjhKJjFvq9AhUiHNm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"euclidean geometry\\\")\", :nextjournal/opts {:loc {:line 188, :end-line 188, :column 1, :end-column 35}, :id \"wikiart/anon-expr-5dtjY2aFa8K2HHgt9nCQVxUq6f5Lnr-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vtt7uq6DtXEwxJFe8n2gpkzUfmCWrFCF6rogAafpXWzzjn37vcaNLJrFyBuVfELxcyJxUsy3z45Hwo2CvDnxGo5Zj.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtxK8uNuDHnN4dBA6isHWJa4TdnSxrf6AFgw9KiieqQ4doAWa9NJZn5SYchif3EDxPX5yp13kEBem84oXkcaLZcQh.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vxf7uCC6nomtjsBgLe9c1Mz6HmWMrb8qbMTcxmYz6zLGN5DDkY32aPAWGKXAi5Qr4cgbZgiGMYBRemDpXir9fJxyj.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtNgsU4ezrHU1f96TcpugaWLrsGCaS6Dqua4uD7Umiqs813UgbmDSek2iga3ryYVD27LUYkFaWKqFokytk2UH384b.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtjY2aFa8K2HHgt9nCQVxUq6f5Lnr-result\"}}, :nextjournal/blob-id \"5dtWch7S3vNAA9pKeMBZDnoz52CmEK\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtjY2aFa8K2HHgt9nCQVxUq6f5Lnr-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtKQRmTvo3A5889oCCJRyxoQyWWEv\"} [:p [:<> \"The only job our \"] [:code [:<> \"usearch\"]] [:<> \" vectordb does is store all the embedding vectors of our images and try to find the \"] [:code [:<> \"n\"]] [:<> \" \\\"closest\\\" vectors given a query vector. Calculating distances is generally pretty fast so using a vectordb isn't even necessary for many (most?) use cases.\"]] [:p [:<> \"Just to check our sanity, we can calculate distances between some vectors manually.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtKQRmTvo3A5889oCCJRyxoQyWWEv\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/content-type \"image/png\", :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtoCpMZqsfugvSSeNCQfrEkkxtbz7mxqwAfdVVJqyJX9bVdDsvjnwwwgU9NuUXbcrxoyXo65iF7UuwhKtJNPmoXNu.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtbTQAyrefoqVaRZRiDoJd5i1LUob#2-result\"}}, :nextjournal/blob-id \"5dtdhq8zBGBwFSDm7bRMfCSSHG3kRy\"}, :nextjournal/width :wide, :nextjournal/opts {:id \"wikiart/anon-expr-5dtbTQAyrefoqVaRZRiDoJd5i1LUob#2-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(def image-embedding\\n  (util/image->embedding (io/file \\\"data\\\" \\\"kitten.jpg\\\")))\", :nextjournal/opts {:loc {:line 199, :end-line 200, :column 1, :end-column 57}, :id \"wikiart/image-embedding-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value 0.010587821, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [1], :nextjournal/value 0.089945294, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [2], :nextjournal/value -0.13139693, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [3], :nextjournal/value -0.05789953, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [4], :nextjournal/value 2.0164324E-4, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [5], :nextjournal/value 0.029953327, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [6], :nextjournal/value 0.06268623, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [7], :nextjournal/value 0.009981341, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [8], :nextjournal/value 0.031602148, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [9], :nextjournal/value 0.055541854, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [10], :nextjournal/value 0.04586608, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [11], :nextjournal/value -0.053575058, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [12], :nextjournal/value 0.05004475, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [13], :nextjournal/value -0.05918384, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [14], :nextjournal/value -0.0049666283, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [15], :nextjournal/value 0.0129579045, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [16], :nextjournal/value -0.14924702, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [17], :nextjournal/value -0.008878507, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [18], :nextjournal/value 0.003060324, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:path [19], :nextjournal/value 0.028087351, :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5duCbUdvihjvpB9hWgPUWhvrzNfrGE\"}} {:nextjournal/value {:n 20, :path [], :total 512, :offset 20}, :nextjournal/viewer {:name nextjournal.clerk.viewer/elision-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-elision, :hash \"5dspwtw9QTXohtFfqtoeWBkFHRFp9w\"}}], :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dt3QWcZsmpyf9UoQBvu1GsszwrB5q\"}, :nextjournal/opts {:id \"wikiart/image-embedding-result\"}}, :nextjournal/blob-id \"5dsY1zcmqC5ZvMHTGaLrGWyWkPjtCY\"}, :nextjournal/opts {:id \"wikiart/image-embedding-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn cosine-similarity\\n  \\\"Returns the cosine similarity between two embeddings as a float in [0.0, 1.0].\\n\\n  The embeddings should be float arrays.\\\"\\n  [^floats emb1 ^floats emb2]\\n  (let [num (alength emb1)]\\n    (loop [dot-product (float 0)\\n           n 0]\\n      (if (< n num)\\n        (recur (+\\n                dot-product\\n                (* (aget emb1 n)\\n                   (aget emb2 n)))\\n               (inc n))\\n        dot-product))))\", :nextjournal/opts {:loc {:line 202, :end-line 216, :column 1, :end-column 24}, :id \"wikiart/cosine-similarity-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[wikiart$cosine_similarity 0xe5f7116 \\\"wikiart$cosine_similarity@e5f7116\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5dqtMySFUYiJg6LQ7pcgF4UwykCavP\"}, :nextjournal/opts {:id \"wikiart/cosine-similarity-result\"}}, :nextjournal/blob-id nil}, :nextjournal/opts {:id \"wikiart/cosine-similarity-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(clerk/table\\n (clerk/use-headers\\n  (into\\n   [[\\\"query text\\\" \\\"distance\\\"]]\\n   (map (fn [txt]\\n          (let [text-embedding (clip/text-embedding @util/clip-ctx txt)]\\n            [txt\\n             (format \\\"%.3f\\\"\\n                     (- 1.0\\n                        (cosine-similarity\\n                         image-embedding\\n                         text-embedding)))])))\\n   [\\\"cute fuzzy white kitten with a fabric background\\\"\\n    \\\"cute fuzzy white kitten\\\"\\n    \\\"cat\\\"\\n    \\\"cute\\\"\\n    \\\"fuzzy\\\"\\n    \\\"banana\\\"\\n    \\\"programming language\\\"\\n    \\\"clojure\\\"])))\", :nextjournal/opts {:loc {:line 218, :end-line 237, :column 1, :end-column 18}, :id \"wikiart/anon-expr-5dtaJkAxqmXR95Z7K1yb5fyMvjr3Ko-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value \"query text\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [0 1], :nextjournal/value \"distance\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-head-viewer, :render-fn #viewer-fn (fn [header-row {:as opts, :keys [path number-col?]}] [:thead (into [:tr] (map-indexed (fn [i {:as header-cell, :nextjournal/keys [value]}] (let [title (when (or (string? value) (keyword? value) (symbol? value)) value)] [:th.pl-6.pr-2.py-1.align-bottom.font-medium.top-0.z-10.bg-white.dark:bg-slate-900.border-b.border-gray-300.dark:border-slate-700 (cond-> {:class (when (and (ifn? number-col?) (number-col? i)) \"text-right\")} title (assoc :title title)) (nextjournal.clerk.render/inspect-presented opts header-cell)]))) header-row)]), :hash \"5dtJfnmVvh9NpxiHt89WAoCkwb1CoD\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value [{:path [1 0 0], :nextjournal/value \"cute fuzzy white kitten with a fabric background\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 0 1], :nextjournal/value \"0.686\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 1], :nextjournal/value [{:path [1 1 0], :nextjournal/value \"cute fuzzy white kitten\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 1 1], :nextjournal/value \"0.695\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 2], :nextjournal/value [{:path [1 2 0], :nextjournal/value \"cat\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 2 1], :nextjournal/value \"0.727\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 3], :nextjournal/value [{:path [1 3 0], :nextjournal/value \"cute\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 3 1], :nextjournal/value \"0.759\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 4], :nextjournal/value [{:path [1 4 0], :nextjournal/value \"fuzzy\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 4 1], :nextjournal/value \"0.765\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 5], :nextjournal/value [{:path [1 5 0], :nextjournal/value \"banana\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 5 1], :nextjournal/value \"0.809\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 6], :nextjournal/value [{:path [1 6 0], :nextjournal/value \"programming language\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 6 1], :nextjournal/value \"0.852\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}} {:path [1 7], :nextjournal/value [{:path [1 7 0], :nextjournal/value \"clojure\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}} {:path [1 7 1], :nextjournal/value \"0.826\", :nextjournal/viewer {:render-fn #viewer-fn nextjournal.clerk.render/render-string, :page-size 80, :hash \"5dsVVgB3v7JQAsqWFYtLDq778DRPPT\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-row-viewer, :render-fn #viewer-fn (fn [row {:as opts, :keys [path number-col?]}] (into [:tr.hover:bg-gray-200.dark:hover:bg-slate-700 {:class (if (even? (peek path)) \"bg-black/5 dark:bg-gray-800\" \"bg-white dark:bg-gray-900\")}] (map-indexed (fn [idx cell] [:td.pl-6.pr-2.py-1 (when (and (ifn? number-col?) (number-col? idx)) {:class \"text-right\"}) (nextjournal.clerk.render/inspect-presented opts cell)])) row)), :hash \"5dqqVdqWUWUc2bBHZ1AQ3gB3mZwQqF\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/table-body-viewer, :page-size 20, :render-fn #viewer-fn (fn [rows opts] (into [:tbody] (map-indexed (fn [idx row] (nextjournal.clerk.render/inspect-presented (update opts :path conj idx) row))) rows)), :hash \"5dtp5yzJKxiDXmbsh9odWfdiPviTx5\"}}], :nextjournal/width :wide, :nextjournal/opts {:num-cols 2, :number-col? #{}, :id \"wikiart/anon-expr-5dtaJkAxqmXR95Z7K1yb5fyMvjr3Ko-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/table-markup-viewer, :render-fn #viewer-fn (fn [head+body opts] [:div (into [nextjournal.clerk.render/render-table-with-sticky-header] (nextjournal.clerk.render/inspect-children opts) head+body)]), :hash \"5dtm8sCWBjbkzUTs6zqH7wCAnbhgBQ\"}}, :nextjournal/blob-id \"5dssiNgBGqV72qsgDJB6uRMtha8kVx\"}, :nextjournal/width :wide, :nextjournal/opts {:num-cols 2, :number-col? #{}, :id \"wikiart/anon-expr-5dtaJkAxqmXR95Z7K1yb5fyMvjr3Ko-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtbHpAkyJBGDWYdsHG2SnYTAsdWbC\"} [:p [:<> \"As you can see, the distance between \\\"clojure\\\" and the kitten image is much farther than the distance between the image and \\\"cute fuzzy white kitten\\\". The reason there's still distance between \\\"cute fuzzy white kitten with a fabric background\\\" and the kitten image is that you would have to perfectly describe the kitten image with your embedding to have a distance of zero. Our description is pretty close, but you could still include more details to distinguish this image from other images with cute kittens.\"]] [\"h2\" {:id \"limitations\"} [:<> \"Limitations\"]] [:p [:<> \"Overall, I'm pretty happy with the results, but there are still some rough spots. For whatever reason, there are set of black and white images that tend score highly for unrelated queries.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtbHpAkyJBGDWYdsHG2SnYTAsdWbC\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"coffee\\\")\", :nextjournal/opts {:loc {:line 245, :end-line 245, :column 1, :end-column 23}, :id \"wikiart/anon-expr-5dsyr8fRzZGLQG6CKMYaHh3aNG93rj-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwEpdQCbNWfCdXApdHmvnYm9DQBmPxk2XRz3LZurMqXzKt3BVZPrLpFhuLovqd9yKMEaVuzgpCbSM2ixf1zGE68CC.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuzgxZ784S2sYDAbTAAnE6AefLggU8EQia2L4jRydZ2m2ZmZuoXCjWWn3naQbqjdEKnxgU7HfwvkEVd3P3s3gDJby.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw7cFEYPwsoaVxmsVzFLrEqCBxMMyz99dygHdeeZdFbedcsWAWqYDUUG6zqKXzzFUEGifgFHsgGVEqPk2q1bwKSzZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxG1bkMFD13kR4g8J1C6imv9y1woGv7eE2gyqVYYWqq876YJ5vnha5fJj7MT7GvcmzYU6szYcqDFBeo7gckTJitK2.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsyr8fRzZGLQG6CKMYaHh3aNG93rj-result\"}}, :nextjournal/blob-id \"5dtPpouXHsVCFJE3uePugcd1NMxRao\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsyr8fRzZGLQG6CKMYaHh3aNG93rj-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5drmv6UPMvRdgJQZbTJam2T9tCaxRi\"} [:p [:<> \"You might convince yourself that Mr. Mustache actually has some coffee-like essence, but he and his friends show up everywhere.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5drmv6UPMvRdgJQZbTJam2T9tCaxRi\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"beer\\\")\", :nextjournal/opts {:loc {:line 249, :end-line 249, :column 1, :end-column 21}, :id \"wikiart/anon-expr-5drxR1LDUGhsVC6um74wDfq2Fc6VHp-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw7cFEYPwsoaVxmsVzFLrEqCBxMMyz99dygHdeeZdFbedcsWAWqYDUUG6zqKXzzFUEGifgFHsgGVEqPk2q1bwKSzZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuN8oN7bFghSvLfaTWwFjZbNVwDG5sYFy4x3ZBdunDW9toSEvjeocLbRp1PKVaxe37ZiCdXWnTAtdCcBmdUzzq6MU.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VxfCfPYHL2BriLAw5mAuSvuyd4966Zt5LdEfrrQJFJ63zStS9WZwdunqEVKPywHTAn7dLjwXw7VjgbsBRv9vGHBRR.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vt9o59uNVaDVH3hmbgsoCE34Pdy5yoTugRaEzbuRbdxdASesanXr1U7ztpHYN5xjsgRWa9vov3hcPWyYuZS1CHr8S.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drxR1LDUGhsVC6um74wDfq2Fc6VHp-result\"}}, :nextjournal/blob-id \"5drhQELA6vLwgogwn38kFmt5NGyKgq\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5drxR1LDUGhsVC6um74wDfq2Fc6VHp-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"samus\\\")\", :nextjournal/opts {:loc {:line 250, :end-line 250, :column 1, :end-column 22}, :id \"wikiart/anon-expr-5dt5182j3U33SEP8EkR6yPYhcUhJPF-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuVimWVcgHHERmvhVkxUdLkAUWXfboFYg3YUKBCnYNMNHj6VbwrMqP7hL3AEzV27vA31coS4DYYQF4AbhJ5tC9CD6.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw7cFEYPwsoaVxmsVzFLrEqCBxMMyz99dygHdeeZdFbedcsWAWqYDUUG6zqKXzzFUEGifgFHsgGVEqPk2q1bwKSzZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvGqhhaXgXdKQR29FDN2M51C83MiiJWEsmSuHrcsKVrtpx6gvHPQMaQHNjS4w7uJQf16CBL76hpGvCFzo3r8rAjf5.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwD51Sx9P8yVbUVXF7phTN8aJQALkMTYb1KfUKfRvhPGiPVubzu46exRakPQHT21eDXV9DmahQhcC6wpFPQAFNQev.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt5182j3U33SEP8EkR6yPYhcUhJPF-result\"}}, :nextjournal/blob-id \"5drDUpopRFfKmRNtwfQTP7nwPCUC5i\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dt5182j3U33SEP8EkR6yPYhcUhJPF-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(search-text \\\"ending\\\")\", :nextjournal/opts {:loc {:line 251, :end-line 251, :column 1, :end-column 23}, :id \"wikiart/anon-expr-5dtJkxdXCModG6biPMKTqgFqUU6KMN-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwD51Sx9P8yVbUVXF7phTN8aJQALkMTYb1KfUKfRvhPGiPVubzu46exRakPQHT21eDXV9DmahQhcC6wpFPQAFNQev.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vw7cFEYPwsoaVxmsVzFLrEqCBxMMyz99dygHdeeZdFbedcsWAWqYDUUG6zqKXzzFUEGifgFHsgGVEqPk2q1bwKSzZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8Vu359FucKW1fppCNFtpw3gS1afZMKwptvAMj1DTDrwmQDd4QboLWfYtK3VzHy3pzCkw7KYzsbxnHPqxqh1QuNxr2z.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwS8VpdaVqo1nRmqCWQkbtjdjqEsrn5Kx7WPfv84pMSgJoD8jWARYrU9qLyRt7rxVpXaDJSb1YvP49DcWLdGMBQqP.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtJkxdXCModG6biPMKTqgFqUU6KMN-result\"}}, :nextjournal/blob-id \"5dquZ1FmYLu2Axw8pVDE8VKbHPPKwi\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dtJkxdXCModG6biPMKTqgFqUU6KMN-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"wikiart/markdown-5dtBGENEvQWVsMCZ9fyHs9pakMSHqx\"} [:p [:<> \"I haven't been showing the distance scores in the results, but these mismatched images do tend to have bad scores. However, the trouble is that it's not clear how to only show \\\"good\\\" results. It seems like you could limit results to images with scores better than some cutoff, but that doesn't seem to work.\"]] [:p [:<> \"I've also noticed the distance metric used has a big influence on the quality of the results. This seems pretty obvious in retrospect, but it's not totally clear what to do about it. There's no metric that seems to be categorically better and I haven't found any better advice than \\\"try them\\\".\"]] [:p [:<> \"It's likely that most of these problems are well known and probably even have fixes or workarounds. If you have any insights, \"] [:a {:href \"https://github.com/phronmophobic/clip.clj/issues\"} [:<> \"let me know\"]] [:<> \"!\"]] [:p [:<> \"Also, you may be wondering if the image results shown in this post are cherry picked, and they totally are, but not by much! The results really are pretty good for the most part. I do think the model struggles a bit since these art pieces are probably different than the original training set, but that's kind of the point. We want a tool that has general applicability without a lot of fuss!\"]] [\"h2\" {:id \"conclusion\"} [:<> \"Conclusion\"]] [:p [:<> \"Exploring vector databases by implementing semantic image search was fun, interesting, and not too much work. It's pretty surprising that finding matching images just from a plain english query and access to the raw images mostly just works. There are still a few kinks to work out, but it seems like progress is forthcoming.\"]]], :nextjournal/opts {:id \"wikiart/markdown-5dtBGENEvQWVsMCZ9fyHs9pakMSHqx\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(search-text \\\"nap time!\\\")\", :nextjournal/opts {:loc {:line 266, :end-line 266, :column 1, :end-column 26}, :id \"wikiart/anon-expr-5dsnptpsQgNwinvwNJKYVNU39Zdg79-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VuqymMcnK8RE5HG1vAAbXQxGWNUMsNJ6A52PeQH8fszk4PbnqiHscwrHaXdXgWRGB5qi2ozxBKCsheZRS8jnJMN39.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [1], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VtDELDuxDz1z5xTu77qsibFdkKSABrpsAyThG9LT36aaBWRimrserXaKL5uc9ZeMqbZsdnP9DCdAReWCcCHVgpZue.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [2], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VvXNtypMnaMP9fVHCbAmVZFBQTpJNgHLKRDCLcMsLk3L7RP8wFs7YVXsUZUQk8bmpujD39nvkVvVqCbd5MHqUYdWV.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}} {:path [3], :nextjournal/content-type \"image/png\", :nextjournal/value \"./_data/8VwYtGWak4emD1rksKxKNnBuFims6e7yLAKEF7B7Pz6XEs6hXp8PhmY5zggE3Q4fGRSnUuB9hHSP15XKzqBXyLRYBZ.png\", :nextjournal/width :wide, :nextjournal/viewer {:render-fn #viewer-fn (fn [blob-or-url] [:div.flex.flex-col.items-center.not-prose [:img {:src (nextjournal.clerk.render/url-for blob-or-url)}]]), :hash \"5dr1jHm6Y8QiFaCfCBLSgNTbqgJFkP\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/row-viewer, :render-fn #viewer-fn (fn [items opts] (let [item-count (count items)] (into [:div {:class \"md:flex md:flex-row md:gap-4 not-prose\", :style opts}] (map (fn [item] [:div.flex.items-center.justify-center.flex-auto (nextjournal.clerk.render/inspect-presented opts item)])) items))), :hash \"5dsJGArRHWmeGnxsqf6ZsMcgknuBt2\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsnptpsQgNwinvwNJKYVNU39Zdg79-result\"}}, :nextjournal/blob-id \"5duCRNNa1vnD46bc1zxwfPgPaCisjY\"}, :nextjournal/opts {:id \"wikiart/anon-expr-5dsnptpsQgNwinvwNJKYVNU39Zdg79-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :path->url {\"src/wikiart.clj\" \"\"}, :current-path \"src/wikiart.clj\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@Me6c4a1aFwAPMjnGU96CERc3zTT/viewer.js?immutable=true\"}, :index \"src/wikiart.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>